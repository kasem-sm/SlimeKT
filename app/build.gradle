plugins {
	id 'com.android.application'
}

apply {
	from("$rootDir/common.gradle")
}

apply plugin: 'kotlin-kapt'
apply plugin: 'dagger.hilt.android.plugin'


def versionProperties = new Properties()
versionProperties.load(new FileInputStream(rootProject.file("version.properties")))
def _versionCode = "${versionProperties['VERSION_CODE']}"
def _versionName = "${versionProperties['MAJOR']}.${versionProperties['VERSION_CODE']}.${versionProperties['MINOR']}.${versionProperties['PATCH']}"

android {
	defaultConfig {
		versionCode = _versionCode
		versionName = _versionName
		applicationId "kasem.sm.slime"
		testInstrumentationRunner "kasem.sm.dao_test.utils.HiltTestRunner"
	}
	buildFeatures {
		kotlinOptions.freeCompilerArgs += "-Xopt-in=androidx.compose.material3.ExperimentalMaterial3Api"
		kotlinOptions.freeCompilerArgs += "-Xopt-in=androidx.compose.animation.ExperimentalAnimationApi"
		kotlinOptions.freeCompilerArgs += "-Xopt-in=androidx.compose.ui.ExperimentalComposeUiApi"
	}
}

provideAndroidXWorkerDeps(this)
provideHiltDeps(this)
provideKtorAndroidDeps(this)

dependencies {
	implementation(project(":core"))
	implementation(project(":common-ui"))

	// Ui Dep
	implementation(project(":ui-profile"))
	implementation(project(":ui-auth"))
	implementation(project(":ui-article-list"))
	implementation(project(":ui-explore"))
	implementation(project(":ui-home"))
	implementation(project(":ui-article-detail"))
	implementation(project(":ui-subscribe-category"))

	// Article
	implementation(project(":article:datasource-impl"))
	implementation(project(":article:widget"))
	implementation(project(":article:worker"))

	// Category
	implementation(project(":category:datasource-impl"))

	// Auth
	implementation(project(":authentication:datasource-impl"))

	implementation AndroidX.core
	implementation Compose.ui
	implementation Compose.material
	implementation Compose.material3
	implementation Compose.tooling
	implementation Compose.activity

	implementation Coil.core
	implementation Accompanist.navigationMaterial
	implementation Accompanist.navigationAnimation
	implementation Accompanist.sysUiController

	implementation Hilt.navigation

	implementation("androidx.security:security-crypto:1.1.0-alpha03")

	// Room
	implementation AndroidX.room
	kapt AndroidX.roomCompiler

	implementation "androidx.lifecycle:lifecycle-livedata-ktx:2.5.0-alpha02"

	// Instrumentation Test
	androidTestImplementation "com.google.truth:truth:1.1.3"
	androidTestImplementation 'junit:junit:4.13.2'
	androidTestImplementation 'androidx.test:runner:1.5.0-alpha01'
	androidTestImplementation "androidx.arch.core:core-testing:2.1.0"
	androidTestImplementation "org.jetbrains.kotlinx:kotlinx-coroutines-test:1.6.0"
	androidTestImplementation 'com.google.dagger:hilt-android-testing:2.40.5'
	kaptAndroidTest 'com.google.dagger:hilt-android-compiler:2.40.5'
}
